<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Entry Form with Conditional Sections</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <nav>
            <a href="index.html">Sales Entry</a>
            <a href="dashboard.html">Dashboard</a>
        </nav>

        <h1>Sales Entry Form</h1>
        
        <form id="salesForm">
            <!-- Section 1: Basic Information -->
            <h2>Section 1: Advisor and Basic Information</h2>
            <label for="advisorName">Advisor Name *</label>
            <select id="advisorName" name="advisorName" required>
                <option value="">Select Advisor</option>
                <option value="Habib">Habib</option>
                <option value="Ads">Ads</option>
                <option value="Ahmed">Ahmed</option>
                <option value="Esther">Esther</option>
                <option value="Baysiti">Baysiti</option>
            </select>

            <label for="orderNumber">Last 4 Digits of Order Number *</label>
            <input type="text" id="orderNumber" name="orderNumber" maxlength="4" required>

            <label for="accountType">Account Type *</label>
            <select id="accountType" name="accountType" required>
                <option value="">Select Account Type</option>
                <option value="Consumer">Consumer</option>
                <option value="Business">Business</option>
            </select>

            <label for="sku">Sales SKU *</label>
            <input type="text" id="sku" name="sku" required>

            <!-- Product Dropdown -->
            <label for="product">Product *</label>
            <select id="product" name="product" required>
                <option value="">Select Product</option>
                <option value="NEW SIMO">NEW SIMO</option>
                <option value="NEW VOICE">NEW VOICE</option>
                <option value="HBB">HBB</option>
                <option value="Other">Other</option>
            </select>

            <!-- Consumer Details Section -->
            <div id="consumerDetails" style="display: none;">
                <h2>Section 2: Consumer Details</h2>
                <label for="idvResult">IDV Result *</label>
                <select id="idvResult" name="idvResult">
                    <option value="Pass">Pass</option>
                    <option value="Decline">Decline (Manager Must Sign Off)</option>
                    <option value="Data Amend">Data Amend</option>
                    <option value="AlternativeProofs">Alternative Proofs</option>
                </select>

                <!-- Alternative Proofs Checklist -->
                <div id="alternativeProofsSection" style="display: none;">
                    <h4>Alternative Proofs Used *</h4>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="alternativeProofs" value="Bank Statement"> Bank Statement</label>
                        <label><input type="checkbox" name="alternativeProofs" value="Driving Licence"> Driving Licence</label>
                        <label><input type="checkbox" name="alternativeProofs" value="Passport"> Passport</label>
                        <label><input type="checkbox" name="alternativeProofs" value="Student Card"> Student Card</label>
                        <label><input type="checkbox" name="alternativeProofs" value="Mortgage/Tenancy Letter"> Mortgage/Tenancy Letter</label>
                        <label><input type="checkbox" name="alternativeProofs" value="University Acceptance/Offer Letter"> University Acceptance/Offer Letter</label>
                        <label><input type="checkbox" name="alternativeProofs" value="Utility Bill"> Utility Bill</label>
                        <label><input type="checkbox" name="alternativeProofs" value="Council Tax Bill"> Council Tax Bill</label>
                        <label><input type="checkbox" name="alternativeProofs" value="National ID Card"> National ID Card</label>
                    </div>
                </div>

                <!-- Confirm Card Usage (Only shown if IDV Result is not Alternative Proofs) -->
                <div id="cardUsageSection">
                    <label for="cardUsageConfirm">Confirm that one card was used once *</label>
                    <select id="cardUsageConfirm" name="cardUsageConfirm">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
            </div>

            <!-- Business Details Section -->
            <div id="businessDetails" style="display: none;">
                <h2>Section 3: Business Details</h2>
                <label for="soleTraderOrLtd">Sole Trader or LTD Company *</label>
                <select id="soleTraderOrLtd" name="soleTraderOrLtd">
                    <option value="">Select Type</option>
                    <option value="Sole Trader">Sole Trader</option>
                    <option value="LTD Company">LTD Company</option>
                </select>
                
                <!-- Sole Trader Section -->
                <div id="soleTraderDetails" style="display: none;">
                    <h3>Sole Trader Details</h3>
                    <label for="is36Months">Is it a 36-Month Airtime Contract? *</label>
                    <select id="is36Months" name="is36Months" required>
                        <option value="">Select</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>

                    <div id="proofOfBusinessSection" style="display: none;">
                        <h4>Proof of Business *</h4>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="proofOfBusiness" value="Business Bank Statement"> Business Bank Statement</label>
                            <label><input type="checkbox" name="proofOfBusiness" value="Tax Return"> Tax Return</label>
                            <label><input type="checkbox" name="proofOfBusiness" value="Invoice"> Invoice</label>
                        </div>
                    </div>

                    <label for="idvResultSoleTrader">IDV Result *</label>
                    <select id="idvResultSoleTrader" name="idvResultSoleTrader">
                        <option value="Pass">Pass</option>
                        <option value="Decline">Decline (Manager Must Sign Off)</option>
                        <option value="Data Amend">Data Amend</option>
                        <option value="N/A">N/A</option>
                    </select>

                    <label for="callValidate">Call Validation Passed *</label>
                    <select id="callValidate" name="callValidate">
                        <option value="Pass">Pass</option>
                        <option value="Fail">Fail</option>
                        <option value="N/A">N/A</option>
                    </select>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="submit-container">
                <button type="submit">Add Sale</button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const accountTypeDropdown = document.getElementById('accountType');
            const productDropdown = document.getElementById('product');
            const idvResultDropdown = document.getElementById('idvResult');
            const alternativeProofsSection = document.getElementById('alternativeProofsSection');
            const cardUsageSection = document.getElementById('cardUsageSection');
            const salesForm = document.getElementById("salesForm");
            const consumerDetailsSection = document.getElementById('consumerDetails');
            const businessDetailsSection = document.getElementById('businessDetails');
            const soleTraderOrLtdDropdown = document.getElementById('soleTraderOrLtd');
            const soleTraderDetailsSection = document.getElementById('soleTraderDetails');
            const ltdCompanyDetailsSection = document.getElementById('ltdCompanyDetails');
            const is36MonthsDropdown = document.getElementById('is36Months');
            const proofOfBusinessSection = document.getElementById('proofOfBusinessSection');

            function updateSections() {
                const accountTypeValue = accountTypeDropdown.value;
                const productValue = productDropdown.value;

                consumerDetailsSection.style.display = (accountTypeValue === 'Consumer' && productValue === 'NEW SIMO') ? 'block' : 'none';
                businessDetailsSection.style.display = (accountTypeValue === 'Business') ? 'block' : 'none';

                soleTraderOrLtdDropdown.required = accountTypeValue === 'Business';

                if (accountTypeValue !== 'Business') {
                    soleTraderDetailsSection.style.display = 'none';
                    ltdCompanyDetailsSection.style.display = 'none';
                    soleTraderOrLtdDropdown.value = '';
                }
            }

            function updateBusinessDetails() {
                const businessType = soleTraderOrLtdDropdown.value;
                soleTraderDetailsSection.style.display = (businessType === 'Sole Trader') ? 'block' : 'none';
                ltdCompanyDetailsSection.style.display = (businessType === 'LTD Company') ? 'block' : 'none';
            }

            function updateProofOfBusiness() {
                proofOfBusinessSection.style.display = is36MonthsDropdown.value === 'Yes' ? 'block' : 'none';
            }

            function updateAlternativeProofs() {
                const showAlternativeProofs = idvResultDropdown.value === 'AlternativeProofs';
                alternativeProofsSection.style.display = showAlternativeProofs ? 'block' : 'none';
                cardUsageSection.style.display = showAlternativeProofs ? 'none' : 'block';
            }

            accountTypeDropdown.addEventListener('change', updateSections);
            productDropdown.addEventListener('change', updateSections);
            soleTraderOrLtdDropdown.addEventListener('change', updateBusinessDetails);
            is36MonthsDropdown.addEventListener('change', updateProofOfBusiness);
            idvResultDropdown.addEventListener('change', updateAlternativeProofs);

            salesForm.addEventListener("submit", (event) => {
                event.preventDefault();
                
                const formData = {
                    advisorName: document.getElementById('advisorName').value,
                    orderNumber: document.getElementById('orderNumber').value,
                    accountType: accountTypeDropdown.value,
                    sku: document.getElementById('sku').value,
                    product: productDropdown.value,
                    idvResult: idvResultDropdown.value,
                    alternativeProofs: Array.from(document.querySelectorAll('input[name="alternativeProofs"]:checked')).map(el => el.value)
                };

                console.log("Sale data added:", formData);
                alert("Sale added successfully!");

                salesForm.reset();
                updateSections();
                updateBusinessDetails();
                updateProofOfBusiness();
                updateAlternativeProofs();
            });
        });
    </script>
</body>
</html>
